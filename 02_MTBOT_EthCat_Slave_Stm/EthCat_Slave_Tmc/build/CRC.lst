ARM GAS  C:\Users\minhp\AppData\Local\Temp\cc9VAMQe.s 			page 1


   1              		.cpu cortex-m4
   2              		.arch armv7e-m
   3              		.fpu fpv4-sp-d16
   4              		.eabi_attribute 27, 1
   5              		.eabi_attribute 28, 1
   6              		.eabi_attribute 20, 1
   7              		.eabi_attribute 21, 1
   8              		.eabi_attribute 23, 3
   9              		.eabi_attribute 24, 1
  10              		.eabi_attribute 25, 1
  11              		.eabi_attribute 26, 1
  12              		.eabi_attribute 30, 1
  13              		.eabi_attribute 34, 1
  14              		.eabi_attribute 18, 4
  15              		.file	"CRC.c"
  16              		.text
  17              	.Ltext0:
  18              		.cfi_sections	.debug_frame
  19              		.section	.text.flipByte,"ax",%progbits
  20              		.align	1
  21              		.syntax unified
  22              		.thumb
  23              		.thumb_func
  25              	flipByte:
  26              	.LVL0:
  27              	.LFB4:
  28              		.file 1 "Application/Drivers/tmc/helpers/CRC.c"
   1:Application/Drivers/tmc/helpers/CRC.c **** /*
   2:Application/Drivers/tmc/helpers/CRC.c ****  * CRC.c
   3:Application/Drivers/tmc/helpers/CRC.c ****  *
   4:Application/Drivers/tmc/helpers/CRC.c ****  *  Created on: 04.12.2017
   5:Application/Drivers/tmc/helpers/CRC.c ****  *      Author: LH
   6:Application/Drivers/tmc/helpers/CRC.c ****  *
   7:Application/Drivers/tmc/helpers/CRC.c ****  *  This is a generic implementation for a CRC8 generator supporting
   8:Application/Drivers/tmc/helpers/CRC.c ****  *  both compile-time (1) and run-time initialized Lookup tables for efficient CRC8 calculation.
   9:Application/Drivers/tmc/helpers/CRC.c ****  *  You can store multiple tables for different polynomials and (non-)reflected CRCs.
  10:Application/Drivers/tmc/helpers/CRC.c ****  *  The different tables are referenced by an index, with an upper limit set at compile time (CRC_T
  11:Application/Drivers/tmc/helpers/CRC.c ****  *
  12:Application/Drivers/tmc/helpers/CRC.c ****  *  To generate CRCs you must first generate the Lookup-table by calling fillCRCTable()
  13:Application/Drivers/tmc/helpers/CRC.c ****  *  with any index. CRCs can then be generated from any data buffer by calling CRC()
  14:Application/Drivers/tmc/helpers/CRC.c ****  *  with the same index previously given to fillCRCTable().
  15:Application/Drivers/tmc/helpers/CRC.c ****  *
  16:Application/Drivers/tmc/helpers/CRC.c ****  *  The table generation has been optimized for speed so that the runtime
  17:Application/Drivers/tmc/helpers/CRC.c ****  *  table generation can even be done during normal operation if required.
  18:Application/Drivers/tmc/helpers/CRC.c ****  *  However, as long as the required polynomials are known on initialization,
  19:Application/Drivers/tmc/helpers/CRC.c ****  *  the table generation should be done at that time.
  20:Application/Drivers/tmc/helpers/CRC.c ****  *  On the Landungsbruecke the initialization of a CRC table takes ~250Âµs. (2)
  21:Application/Drivers/tmc/helpers/CRC.c ****  *  Should your application still have problems with the table calculation time,
  22:Application/Drivers/tmc/helpers/CRC.c ****  *  this algorithm could probably be speed up by preparing a 2- or 4-bit lookup table
  23:Application/Drivers/tmc/helpers/CRC.c ****  *  to speed up the actual table generation.
  24:Application/Drivers/tmc/helpers/CRC.c ****  *
  25:Application/Drivers/tmc/helpers/CRC.c ****  *  (1): For compile-time CRC tables, just fill the table(s) by initializing CRCTables[] to the pro
  26:Application/Drivers/tmc/helpers/CRC.c ****  *  (2): Tested by toggling a GPIO pin, generating a table in-between and measuring the GPIO pulse 
  27:Application/Drivers/tmc/helpers/CRC.c ****  */
  28:Application/Drivers/tmc/helpers/CRC.c **** 
  29:Application/Drivers/tmc/helpers/CRC.c **** #include "CRC.h"
  30:Application/Drivers/tmc/helpers/CRC.c **** 
ARM GAS  C:\Users\minhp\AppData\Local\Temp\cc9VAMQe.s 			page 2


  31:Application/Drivers/tmc/helpers/CRC.c **** typedef struct {
  32:Application/Drivers/tmc/helpers/CRC.c **** 	uint8_t table[256];
  33:Application/Drivers/tmc/helpers/CRC.c **** 	uint8_t polynomial;
  34:Application/Drivers/tmc/helpers/CRC.c **** 	bool isReflected;
  35:Application/Drivers/tmc/helpers/CRC.c **** } CRCTypeDef;
  36:Application/Drivers/tmc/helpers/CRC.c **** 
  37:Application/Drivers/tmc/helpers/CRC.c **** CRCTypeDef CRCTables[CRC_TABLE_COUNT] = { 0 };
  38:Application/Drivers/tmc/helpers/CRC.c **** 
  39:Application/Drivers/tmc/helpers/CRC.c **** static uint8_t flipByte(uint8_t value);
  40:Application/Drivers/tmc/helpers/CRC.c **** static uint32_t flipBitsInBytes(uint32_t value);
  41:Application/Drivers/tmc/helpers/CRC.c **** 
  42:Application/Drivers/tmc/helpers/CRC.c **** /* This function generates the Lookup table used for CRC calculations.
  43:Application/Drivers/tmc/helpers/CRC.c ****  *
  44:Application/Drivers/tmc/helpers/CRC.c ****  * Arguments:
  45:Application/Drivers/tmc/helpers/CRC.c ****  *     uint8_t polynomial: The CRC polynomial for which the table will be generated.
  46:Application/Drivers/tmc/helpers/CRC.c ****  *     bool isReflected: Indicator whether the CRC table will be reflected or not.
  47:Application/Drivers/tmc/helpers/CRC.c ****  *     uint8_t index: The index of the table to be filled.
  48:Application/Drivers/tmc/helpers/CRC.c ****  *
  49:Application/Drivers/tmc/helpers/CRC.c ****  * How it works:
  50:Application/Drivers/tmc/helpers/CRC.c ****  *     A CRC calculation of a byte can be done by taking the byte to be CRC'd,
  51:Application/Drivers/tmc/helpers/CRC.c ****  *     shifting it left by one (appending a 0) and - if a 1 has been shifted out -
  52:Application/Drivers/tmc/helpers/CRC.c ****  *     XOR-ing in the CRC polynomial. After 8 iterations the result will be the
  53:Application/Drivers/tmc/helpers/CRC.c ****  *     CRC of the Byte.
  54:Application/Drivers/tmc/helpers/CRC.c ****  *
  55:Application/Drivers/tmc/helpers/CRC.c ****  *     The function below does this in a compact way, by using all 4 bytes of a
  56:Application/Drivers/tmc/helpers/CRC.c ****  *     uint32_t to do 4 separate CRC bytes at once.
  57:Application/Drivers/tmc/helpers/CRC.c ****  *     For this to work without the Byte shifting interfering with adjacent bytes,
  58:Application/Drivers/tmc/helpers/CRC.c ****  *     the polynomial has the 8th bit (0x100) set. That way, if the shifted-out bit
  59:Application/Drivers/tmc/helpers/CRC.c ****  *     is 1, the following XOR-ing with the CRC polynomial will set that 1 to a 0,
  60:Application/Drivers/tmc/helpers/CRC.c ****  *     resulting in the shifted-in 0 for the adjacent byte.
  61:Application/Drivers/tmc/helpers/CRC.c ****  *     This process will go from the the lowest to the highest byte, resulting in
  62:Application/Drivers/tmc/helpers/CRC.c ****  *     fully independent byte-wise CRC calculations. For the highest byte, the value
  63:Application/Drivers/tmc/helpers/CRC.c ****  *     of the shifted-out byte needs to be stored before shifting the bytes (isMSBSet).
  64:Application/Drivers/tmc/helpers/CRC.c ****  *
  65:Application/Drivers/tmc/helpers/CRC.c ****  *     The for-loop that iterates over all uint8_t values starts out with the
  66:Application/Drivers/tmc/helpers/CRC.c ****  *     uint8_t values 3 to 0 stored in one uint32_t: 0x03020100
  67:Application/Drivers/tmc/helpers/CRC.c ****  *     for each iteration each uint8_t value will increase by 4..
  68:Application/Drivers/tmc/helpers/CRC.c ****  *     0 -> 4 -> 8 -> C -> ...
  69:Application/Drivers/tmc/helpers/CRC.c ****  *     1 -> 5 -> 9 -> D -> ...
  70:Application/Drivers/tmc/helpers/CRC.c ****  *     2 -> 6 -> A -> E -> ...
  71:Application/Drivers/tmc/helpers/CRC.c ****  *     3 -> 7 -> B -> F -> ...
  72:Application/Drivers/tmc/helpers/CRC.c ****  *     ..resulting in an increase of the uint32_t by 0x04040404:
  73:Application/Drivers/tmc/helpers/CRC.c ****  *     0x03020100 -> 0x07060504 -> 0x0B0A0908 -> 0x0F0E0D0C -> ...
  74:Application/Drivers/tmc/helpers/CRC.c ****  *     The loop ends as soon as we have iterated over all uint8_t values.
  75:Application/Drivers/tmc/helpers/CRC.c ****  *     We detect that by looking for the byte-wise overflow into the next byte:
  76:Application/Drivers/tmc/helpers/CRC.c ****  *     0xFFFEFDFC                  <- last uint32_t value to be calculated
  77:Application/Drivers/tmc/helpers/CRC.c ****  *     0xFF,  0xFE,  0xFD,  0xFC   <- the corresponding uint8_t values
  78:Application/Drivers/tmc/helpers/CRC.c ****  *     0x103, 0x102, 0x101, 0x100  <- incremented uint8_t values (overflow into the next byte!)
  79:Application/Drivers/tmc/helpers/CRC.c ****  *     0x04030200                  <- uint32_t value with the overflowed bytes
  80:Application/Drivers/tmc/helpers/CRC.c ****  *
  81:Application/Drivers/tmc/helpers/CRC.c ****  *     We have the lower uint8_t values at the lower bytes of the uint32_t.
  82:Application/Drivers/tmc/helpers/CRC.c ****  *     This allows us to simply store the lowest byte of the uint32_t,
  83:Application/Drivers/tmc/helpers/CRC.c ****  *     right-shift the uint32_t by 8 and increment the table pointer.
  84:Application/Drivers/tmc/helpers/CRC.c ****  *     After 4 iterations of that all 4 bytes of the uint32_t are stored in the table.
  85:Application/Drivers/tmc/helpers/CRC.c ****  */
  86:Application/Drivers/tmc/helpers/CRC.c **** uint8_t tmc_fillCRC8Table(uint8_t polynomial, bool isReflected, uint8_t index)
  87:Application/Drivers/tmc/helpers/CRC.c **** {
ARM GAS  C:\Users\minhp\AppData\Local\Temp\cc9VAMQe.s 			page 3


  88:Application/Drivers/tmc/helpers/CRC.c **** 	uint32_t CRCdata;
  89:Application/Drivers/tmc/helpers/CRC.c **** 	// Helper pointer for traversing the result table
  90:Application/Drivers/tmc/helpers/CRC.c **** 	uint8_t *table;
  91:Application/Drivers/tmc/helpers/CRC.c **** 
  92:Application/Drivers/tmc/helpers/CRC.c **** 	if(index >= CRC_TABLE_COUNT)
  93:Application/Drivers/tmc/helpers/CRC.c **** 		return 0;
  94:Application/Drivers/tmc/helpers/CRC.c **** 
  95:Application/Drivers/tmc/helpers/CRC.c **** 	CRCTables[index].polynomial   = polynomial;
  96:Application/Drivers/tmc/helpers/CRC.c **** 	CRCTables[index].isReflected  = isReflected;
  97:Application/Drivers/tmc/helpers/CRC.c **** 	table = &CRCTables[index].table[0];
  98:Application/Drivers/tmc/helpers/CRC.c **** 
  99:Application/Drivers/tmc/helpers/CRC.c **** 	// Extend the polynomial to correct byte MSBs shifting into next bytes
 100:Application/Drivers/tmc/helpers/CRC.c **** 	uint32_t poly = (uint32_t) polynomial | 0x0100;
 101:Application/Drivers/tmc/helpers/CRC.c **** 
 102:Application/Drivers/tmc/helpers/CRC.c **** 	// Iterate over all 256 possible uint8_t values, compressed into a uint32_t (see detailed explanat
 103:Application/Drivers/tmc/helpers/CRC.c **** 	uint32_t i;
 104:Application/Drivers/tmc/helpers/CRC.c **** 	for(i = 0x03020100; i != 0x04030200; i+=0x04040404)
 105:Application/Drivers/tmc/helpers/CRC.c **** 	{
 106:Application/Drivers/tmc/helpers/CRC.c **** 		// For reflected table: Flip the bits of each input byte
 107:Application/Drivers/tmc/helpers/CRC.c **** 		CRCdata = (isReflected)? flipBitsInBytes(i) : i;
 108:Application/Drivers/tmc/helpers/CRC.c **** 
 109:Application/Drivers/tmc/helpers/CRC.c **** 		// Iterate over 8 Bits
 110:Application/Drivers/tmc/helpers/CRC.c **** 		int j;
 111:Application/Drivers/tmc/helpers/CRC.c **** 		for(j = 0; j < 8; j++)
 112:Application/Drivers/tmc/helpers/CRC.c **** 		{
 113:Application/Drivers/tmc/helpers/CRC.c **** 			// Store value of soon-to-be shifted out byte
 114:Application/Drivers/tmc/helpers/CRC.c **** 			uint8_t isMSBSet = (CRCdata & 0x80000000)? 1:0;
 115:Application/Drivers/tmc/helpers/CRC.c **** 
 116:Application/Drivers/tmc/helpers/CRC.c **** 			// CRC Shift
 117:Application/Drivers/tmc/helpers/CRC.c **** 			CRCdata <<= 1;
 118:Application/Drivers/tmc/helpers/CRC.c **** 
 119:Application/Drivers/tmc/helpers/CRC.c **** 			// XOR the bytes when required, lowest to highest
 120:Application/Drivers/tmc/helpers/CRC.c **** 			CRCdata ^= (CRCdata & 0x00000100)? (poly      ) : 0;
 121:Application/Drivers/tmc/helpers/CRC.c **** 			CRCdata ^= (CRCdata & 0x00010000)? (poly << 8 ) : 0;
 122:Application/Drivers/tmc/helpers/CRC.c **** 			CRCdata ^= (CRCdata & 0x01000000)? (poly << 16) : 0;
 123:Application/Drivers/tmc/helpers/CRC.c **** 			CRCdata ^= (isMSBSet)?             (poly << 24) : 0;
 124:Application/Drivers/tmc/helpers/CRC.c **** 		}
 125:Application/Drivers/tmc/helpers/CRC.c **** 
 126:Application/Drivers/tmc/helpers/CRC.c **** 		// For reflected table: Flip the bits of each output byte
 127:Application/Drivers/tmc/helpers/CRC.c **** 		CRCdata = (isReflected)? flipBitsInBytes(CRCdata) : CRCdata;
 128:Application/Drivers/tmc/helpers/CRC.c **** 		// Store the CRC result bytes in the table array
 129:Application/Drivers/tmc/helpers/CRC.c **** 		*table++ = (uint8_t) CRCdata;
 130:Application/Drivers/tmc/helpers/CRC.c **** 		CRCdata >>= 8;
 131:Application/Drivers/tmc/helpers/CRC.c **** 		*table++ = (uint8_t) CRCdata;
 132:Application/Drivers/tmc/helpers/CRC.c **** 		CRCdata >>= 8;
 133:Application/Drivers/tmc/helpers/CRC.c **** 		*table++ = (uint8_t) CRCdata;
 134:Application/Drivers/tmc/helpers/CRC.c **** 		CRCdata >>= 8;
 135:Application/Drivers/tmc/helpers/CRC.c **** 		*table++ = (uint8_t) CRCdata;
 136:Application/Drivers/tmc/helpers/CRC.c **** 	}
 137:Application/Drivers/tmc/helpers/CRC.c **** 
 138:Application/Drivers/tmc/helpers/CRC.c **** 	return 1;
 139:Application/Drivers/tmc/helpers/CRC.c **** }
 140:Application/Drivers/tmc/helpers/CRC.c **** 
 141:Application/Drivers/tmc/helpers/CRC.c **** /* This function calculates the CRC from a data buffer
 142:Application/Drivers/tmc/helpers/CRC.c ****  *
 143:Application/Drivers/tmc/helpers/CRC.c ****  * Arguments:
 144:Application/Drivers/tmc/helpers/CRC.c ****  *     uint8_t *data: A pointer to the data that will be CRC'd.
ARM GAS  C:\Users\minhp\AppData\Local\Temp\cc9VAMQe.s 			page 4


 145:Application/Drivers/tmc/helpers/CRC.c ****  *     uint32_t bytes: The length of the data buffer.
 146:Application/Drivers/tmc/helpers/CRC.c ****  *     uint8_t index: The index of the CRC table to be used.
 147:Application/Drivers/tmc/helpers/CRC.c ****  */
 148:Application/Drivers/tmc/helpers/CRC.c **** uint8_t tmc_CRC8(uint8_t *data, uint32_t bytes, uint8_t index)
 149:Application/Drivers/tmc/helpers/CRC.c **** {
 150:Application/Drivers/tmc/helpers/CRC.c **** 	uint8_t result = 0;
 151:Application/Drivers/tmc/helpers/CRC.c **** 	uint8_t *table;
 152:Application/Drivers/tmc/helpers/CRC.c **** 
 153:Application/Drivers/tmc/helpers/CRC.c **** 	if(index >= CRC_TABLE_COUNT)
 154:Application/Drivers/tmc/helpers/CRC.c **** 		return 0;
 155:Application/Drivers/tmc/helpers/CRC.c **** 
 156:Application/Drivers/tmc/helpers/CRC.c **** 	table = &CRCTables[index].table[0];
 157:Application/Drivers/tmc/helpers/CRC.c **** 
 158:Application/Drivers/tmc/helpers/CRC.c **** 	while(bytes--)
 159:Application/Drivers/tmc/helpers/CRC.c **** 		result = table[result ^ *data++];
 160:Application/Drivers/tmc/helpers/CRC.c **** 
 161:Application/Drivers/tmc/helpers/CRC.c **** 	return (CRCTables[index].isReflected)? flipByte(result) : result;
 162:Application/Drivers/tmc/helpers/CRC.c **** }
 163:Application/Drivers/tmc/helpers/CRC.c **** 
 164:Application/Drivers/tmc/helpers/CRC.c **** uint8_t tmc_tableGetPolynomial(uint8_t index)
 165:Application/Drivers/tmc/helpers/CRC.c **** {
 166:Application/Drivers/tmc/helpers/CRC.c **** 	if(index >= CRC_TABLE_COUNT)
 167:Application/Drivers/tmc/helpers/CRC.c **** 		return 0;
 168:Application/Drivers/tmc/helpers/CRC.c **** 
 169:Application/Drivers/tmc/helpers/CRC.c **** 	return CRCTables[index].polynomial;
 170:Application/Drivers/tmc/helpers/CRC.c **** }
 171:Application/Drivers/tmc/helpers/CRC.c **** 
 172:Application/Drivers/tmc/helpers/CRC.c **** bool tmc_tableIsReflected(uint8_t index)
 173:Application/Drivers/tmc/helpers/CRC.c **** {
 174:Application/Drivers/tmc/helpers/CRC.c **** 	if(index >= CRC_TABLE_COUNT)
 175:Application/Drivers/tmc/helpers/CRC.c **** 		return false;
 176:Application/Drivers/tmc/helpers/CRC.c **** 
 177:Application/Drivers/tmc/helpers/CRC.c **** 	return CRCTables[index].isReflected;
 178:Application/Drivers/tmc/helpers/CRC.c **** }
 179:Application/Drivers/tmc/helpers/CRC.c **** 
 180:Application/Drivers/tmc/helpers/CRC.c **** // Helper functions
 181:Application/Drivers/tmc/helpers/CRC.c **** static uint8_t flipByte(uint8_t value)
 182:Application/Drivers/tmc/helpers/CRC.c **** {
  29              		.loc 1 182 1 view -0
  30              		.cfi_startproc
  31              		@ args = 0, pretend = 0, frame = 0
  32              		@ frame_needed = 0, uses_anonymous_args = 0
  33              		@ link register save eliminated.
 183:Application/Drivers/tmc/helpers/CRC.c **** 	// swap odd and even bits
 184:Application/Drivers/tmc/helpers/CRC.c **** 	value = ((value >> 1) & 0x55) | ((value & 0x55) << 1);
  34              		.loc 1 184 2 view .LVU1
  35              		.loc 1 184 24 is_stmt 0 view .LVU2
  36 0000 4308     		lsrs	r3, r0, #1
  37 0002 03F05503 		and	r3, r3, #85
  38              		.loc 1 184 50 view .LVU3
  39 0006 4000     		lsls	r0, r0, #1
  40              	.LVL1:
  41              		.loc 1 184 50 view .LVU4
  42 0008 20F05500 		bic	r0, r0, #85
  43 000c 40B2     		sxtb	r0, r0
  44              		.loc 1 184 32 view .LVU5
  45 000e 1843     		orrs	r0, r0, r3
ARM GAS  C:\Users\minhp\AppData\Local\Temp\cc9VAMQe.s 			page 5


  46              		.loc 1 184 8 view .LVU6
  47 0010 C3B2     		uxtb	r3, r0
  48              	.LVL2:
 185:Application/Drivers/tmc/helpers/CRC.c **** 	// swap consecutive pairs
 186:Application/Drivers/tmc/helpers/CRC.c **** 	value = ((value >> 2) & 0x33) | ((value & 0x33) << 2);
  49              		.loc 1 186 2 is_stmt 1 view .LVU7
  50              		.loc 1 186 24 is_stmt 0 view .LVU8
  51 0012 C0F38500 		ubfx	r0, r0, #2, #6
  52 0016 00F03300 		and	r0, r0, #51
  53              		.loc 1 186 50 view .LVU9
  54 001a 9B00     		lsls	r3, r3, #2
  55              	.LVL3:
  56              		.loc 1 186 50 view .LVU10
  57 001c 23F03303 		bic	r3, r3, #51
  58 0020 5BB2     		sxtb	r3, r3
  59              		.loc 1 186 32 view .LVU11
  60 0022 1843     		orrs	r0, r0, r3
  61              		.loc 1 186 8 view .LVU12
  62 0024 C3B2     		uxtb	r3, r0
  63              	.LVL4:
 187:Application/Drivers/tmc/helpers/CRC.c **** 	// swap nibbles ...
 188:Application/Drivers/tmc/helpers/CRC.c **** 	value = ((value >> 4) & 0x0F) | ((value & 0x0F) << 4);
  64              		.loc 1 188 2 is_stmt 1 view .LVU13
  65              		.loc 1 188 32 is_stmt 0 view .LVU14
  66 0026 C0F30310 		ubfx	r0, r0, #4, #4
  67 002a 40EA0310 		orr	r0, r0, r3, lsl #4
  68              	.LVL5:
 189:Application/Drivers/tmc/helpers/CRC.c **** 
 190:Application/Drivers/tmc/helpers/CRC.c **** 	return value;
  69              		.loc 1 190 2 is_stmt 1 view .LVU15
 191:Application/Drivers/tmc/helpers/CRC.c **** }
  70              		.loc 1 191 1 is_stmt 0 view .LVU16
  71 002e C0B2     		uxtb	r0, r0
  72              		.loc 1 191 1 view .LVU17
  73 0030 7047     		bx	lr
  74              		.cfi_endproc
  75              	.LFE4:
  77              		.section	.text.flipBitsInBytes,"ax",%progbits
  78              		.align	1
  79              		.syntax unified
  80              		.thumb
  81              		.thumb_func
  83              	flipBitsInBytes:
  84              	.LVL6:
  85              	.LFB5:
 192:Application/Drivers/tmc/helpers/CRC.c **** 
 193:Application/Drivers/tmc/helpers/CRC.c **** /* This helper function switches all bits within each byte.
 194:Application/Drivers/tmc/helpers/CRC.c ****  * The byte order remains the same:
 195:Application/Drivers/tmc/helpers/CRC.c ****  * [b31 b30 b29 b28 b27 b26 b25 b24 .. b7 b6 b5 b4 b3 b2 b1 b0]
 196:Application/Drivers/tmc/helpers/CRC.c ****  *                                  ||
 197:Application/Drivers/tmc/helpers/CRC.c ****  *                                 \||/
 198:Application/Drivers/tmc/helpers/CRC.c ****  *                                  \/
 199:Application/Drivers/tmc/helpers/CRC.c ****  * [b24 b25 b26 b27 b28 b29 b30 b31 .. b0 b1 b2 b3 b4 b5 b6 b7]
 200:Application/Drivers/tmc/helpers/CRC.c ****  */
 201:Application/Drivers/tmc/helpers/CRC.c **** static uint32_t flipBitsInBytes(uint32_t value)
 202:Application/Drivers/tmc/helpers/CRC.c **** {
  86              		.loc 1 202 1 is_stmt 1 view -0
ARM GAS  C:\Users\minhp\AppData\Local\Temp\cc9VAMQe.s 			page 6


  87              		.cfi_startproc
  88              		@ args = 0, pretend = 0, frame = 0
  89              		@ frame_needed = 0, uses_anonymous_args = 0
  90              		@ link register save eliminated.
 203:Application/Drivers/tmc/helpers/CRC.c **** 	// swap odd and even bits
 204:Application/Drivers/tmc/helpers/CRC.c **** 	value = ((value >> 1) & 0x55555555) | ((value & 0x55555555) << 1);
  91              		.loc 1 204 2 view .LVU19
  92              		.loc 1 204 18 is_stmt 0 view .LVU20
  93 0000 4208     		lsrs	r2, r0, #1
  94              		.loc 1 204 24 view .LVU21
  95 0002 02F05532 		and	r2, r2, #1431655765
  96              		.loc 1 204 62 view .LVU22
  97 0006 4000     		lsls	r0, r0, #1
  98              	.LVL7:
  99              		.loc 1 204 62 view .LVU23
 100 0008 00F0AA30 		and	r0, r0, #-1431655766
 101              		.loc 1 204 8 view .LVU24
 102 000c 0243     		orrs	r2, r2, r0
 103              	.LVL8:
 205:Application/Drivers/tmc/helpers/CRC.c **** 	// swap consecutive pairs
 206:Application/Drivers/tmc/helpers/CRC.c **** 	value = ((value >> 2) & 0x33333333) | ((value & 0x33333333) << 2);
 104              		.loc 1 206 2 is_stmt 1 view .LVU25
 105              		.loc 1 206 18 is_stmt 0 view .LVU26
 106 000e 9308     		lsrs	r3, r2, #2
 107              		.loc 1 206 24 view .LVU27
 108 0010 03F03333 		and	r3, r3, #858993459
 109              		.loc 1 206 62 view .LVU28
 110 0014 9200     		lsls	r2, r2, #2
 111              	.LVL9:
 112              		.loc 1 206 62 view .LVU29
 113 0016 02F0CC32 		and	r2, r2, #-858993460
 114              		.loc 1 206 8 view .LVU30
 115 001a 1343     		orrs	r3, r3, r2
 116              	.LVL10:
 207:Application/Drivers/tmc/helpers/CRC.c **** 	// swap nibbles ...
 208:Application/Drivers/tmc/helpers/CRC.c **** 	value = ((value >> 4) & 0x0F0F0F0F) | ((value & 0x0F0F0F0F) << 4);
 117              		.loc 1 208 2 is_stmt 1 view .LVU31
 118              		.loc 1 208 18 is_stmt 0 view .LVU32
 119 001c 1809     		lsrs	r0, r3, #4
 120              		.loc 1 208 24 view .LVU33
 121 001e 00F00F30 		and	r0, r0, #252645135
 122              		.loc 1 208 62 view .LVU34
 123 0022 1B01     		lsls	r3, r3, #4
 124              	.LVL11:
 125              		.loc 1 208 62 view .LVU35
 126 0024 03F0F033 		and	r3, r3, #-252645136
 127              	.LVL12:
 209:Application/Drivers/tmc/helpers/CRC.c **** 
 210:Application/Drivers/tmc/helpers/CRC.c **** 	return value;
 128              		.loc 1 210 2 is_stmt 1 view .LVU36
 211:Application/Drivers/tmc/helpers/CRC.c **** }
 129              		.loc 1 211 1 is_stmt 0 view .LVU37
 130 0028 1843     		orrs	r0, r0, r3
 131              	.LVL13:
 132              		.loc 1 211 1 view .LVU38
 133 002a 7047     		bx	lr
 134              		.cfi_endproc
ARM GAS  C:\Users\minhp\AppData\Local\Temp\cc9VAMQe.s 			page 7


 135              	.LFE5:
 137              		.section	.text.tmc_fillCRC8Table,"ax",%progbits
 138              		.align	1
 139              		.global	tmc_fillCRC8Table
 140              		.syntax unified
 141              		.thumb
 142              		.thumb_func
 144              	tmc_fillCRC8Table:
 145              	.LVL14:
 146              	.LFB0:
  87:Application/Drivers/tmc/helpers/CRC.c **** 	uint32_t CRCdata;
 147              		.loc 1 87 1 is_stmt 1 view -0
 148              		.cfi_startproc
 149              		@ args = 0, pretend = 0, frame = 0
 150              		@ frame_needed = 0, uses_anonymous_args = 0
  88:Application/Drivers/tmc/helpers/CRC.c **** 	// Helper pointer for traversing the result table
 151              		.loc 1 88 2 view .LVU40
  90:Application/Drivers/tmc/helpers/CRC.c **** 
 152              		.loc 1 90 2 view .LVU41
  92:Application/Drivers/tmc/helpers/CRC.c **** 		return 0;
 153              		.loc 1 92 2 view .LVU42
  92:Application/Drivers/tmc/helpers/CRC.c **** 		return 0;
 154              		.loc 1 92 4 is_stmt 0 view .LVU43
 155 0000 012A     		cmp	r2, #1
 156 0002 46D8     		bhi	.L15
  87:Application/Drivers/tmc/helpers/CRC.c **** 	uint32_t CRCdata;
 157              		.loc 1 87 1 view .LVU44
 158 0004 F8B5     		push	{r3, r4, r5, r6, r7, lr}
 159              	.LCFI0:
 160              		.cfi_def_cfa_offset 24
 161              		.cfi_offset 3, -24
 162              		.cfi_offset 4, -20
 163              		.cfi_offset 5, -16
 164              		.cfi_offset 6, -12
 165              		.cfi_offset 7, -8
 166              		.cfi_offset 14, -4
 167 0006 0F46     		mov	r7, r1
  95:Application/Drivers/tmc/helpers/CRC.c **** 	CRCTables[index].isReflected  = isReflected;
 168              		.loc 1 95 2 is_stmt 1 view .LVU45
  95:Application/Drivers/tmc/helpers/CRC.c **** 	CRCTables[index].isReflected  = isReflected;
 169              		.loc 1 95 32 is_stmt 0 view .LVU46
 170 0008 234D     		ldr	r5, .L24
 171 000a 02EBC213 		add	r3, r2, r2, lsl #7
 172 000e 05EB4303 		add	r3, r5, r3, lsl #1
 173 0012 83F80001 		strb	r0, [r3, #256]
  96:Application/Drivers/tmc/helpers/CRC.c **** 	table = &CRCTables[index].table[0];
 174              		.loc 1 96 2 is_stmt 1 view .LVU47
  96:Application/Drivers/tmc/helpers/CRC.c **** 	table = &CRCTables[index].table[0];
 175              		.loc 1 96 32 is_stmt 0 view .LVU48
 176 0016 83F80111 		strb	r1, [r3, #257]
  97:Application/Drivers/tmc/helpers/CRC.c **** 
 177              		.loc 1 97 2 is_stmt 1 view .LVU49
  97:Application/Drivers/tmc/helpers/CRC.c **** 
 178              		.loc 1 97 8 is_stmt 0 view .LVU50
 179 001a 1D46     		mov	r5, r3
 180              	.LVL15:
 100:Application/Drivers/tmc/helpers/CRC.c **** 
ARM GAS  C:\Users\minhp\AppData\Local\Temp\cc9VAMQe.s 			page 8


 181              		.loc 1 100 2 is_stmt 1 view .LVU51
 100:Application/Drivers/tmc/helpers/CRC.c **** 
 182              		.loc 1 100 11 is_stmt 0 view .LVU52
 183 001c 40F48074 		orr	r4, r0, #256
 184              	.LVL16:
 103:Application/Drivers/tmc/helpers/CRC.c **** 	for(i = 0x03020100; i != 0x04030200; i+=0x04040404)
 185              		.loc 1 103 2 is_stmt 1 view .LVU53
 104:Application/Drivers/tmc/helpers/CRC.c **** 	{
 186              		.loc 1 104 2 view .LVU54
 104:Application/Drivers/tmc/helpers/CRC.c **** 	{
 187              		.loc 1 104 8 is_stmt 0 view .LVU55
 188 0020 1E4E     		ldr	r6, .L24+4
 104:Application/Drivers/tmc/helpers/CRC.c **** 	{
 189              		.loc 1 104 2 view .LVU56
 190 0022 2AE0     		b	.L5
 191              	.LVL17:
 192              	.L16:
 193              	.LBB2:
 107:Application/Drivers/tmc/helpers/CRC.c **** 
 194              		.loc 1 107 47 view .LVU57
 195 0024 3046     		mov	r0, r6
 196 0026 30E0     		b	.L6
 197              	.LVL18:
 198              	.L17:
 199              	.LBB3:
 123:Application/Drivers/tmc/helpers/CRC.c **** 		}
 200              		.loc 1 123 52 view .LVU58
 201 0028 0020     		movs	r0, #0
 202              	.L11:
 123:Application/Drivers/tmc/helpers/CRC.c **** 		}
 203              		.loc 1 123 12 discriminator 4 view .LVU59
 204 002a 5840     		eors	r0, r0, r3
 205              	.LVL19:
 123:Application/Drivers/tmc/helpers/CRC.c **** 		}
 206              		.loc 1 123 12 discriminator 4 view .LVU60
 207              	.LBE3:
 111:Application/Drivers/tmc/helpers/CRC.c **** 		{
 208              		.loc 1 111 21 is_stmt 1 discriminator 4 view .LVU61
 111:Application/Drivers/tmc/helpers/CRC.c **** 		{
 209              		.loc 1 111 22 is_stmt 0 discriminator 4 view .LVU62
 210 002c 0132     		adds	r2, r2, #1
 211              	.LVL20:
 212              	.L7:
 111:Application/Drivers/tmc/helpers/CRC.c **** 		{
 213              		.loc 1 111 14 is_stmt 1 discriminator 2 view .LVU63
 111:Application/Drivers/tmc/helpers/CRC.c **** 		{
 214              		.loc 1 111 3 is_stmt 0 discriminator 2 view .LVU64
 215 002e 072A     		cmp	r2, #7
 216 0030 14DC     		bgt	.L22
 217              	.LBB4:
 114:Application/Drivers/tmc/helpers/CRC.c **** 
 218              		.loc 1 114 4 is_stmt 1 view .LVU65
 114:Application/Drivers/tmc/helpers/CRC.c **** 
 219              		.loc 1 114 12 is_stmt 0 view .LVU66
 220 0032 C10F     		lsrs	r1, r0, #31
 221              	.LVL21:
 117:Application/Drivers/tmc/helpers/CRC.c **** 
ARM GAS  C:\Users\minhp\AppData\Local\Temp\cc9VAMQe.s 			page 9


 222              		.loc 1 117 4 is_stmt 1 view .LVU67
 117:Application/Drivers/tmc/helpers/CRC.c **** 
 223              		.loc 1 117 12 is_stmt 0 view .LVU68
 224 0034 4000     		lsls	r0, r0, #1
 225              	.LVL22:
 120:Application/Drivers/tmc/helpers/CRC.c **** 			CRCdata ^= (CRCdata & 0x00010000)? (poly << 8 ) : 0;
 226              		.loc 1 120 4 is_stmt 1 view .LVU69
 120:Application/Drivers/tmc/helpers/CRC.c **** 			CRCdata ^= (CRCdata & 0x00010000)? (poly << 8 ) : 0;
 227              		.loc 1 120 52 is_stmt 0 view .LVU70
 228 0036 10F48073 		ands	r3, r0, #256
 229 003a 00D0     		beq	.L8
 230 003c 2346     		mov	r3, r4
 231              	.L8:
 120:Application/Drivers/tmc/helpers/CRC.c **** 			CRCdata ^= (CRCdata & 0x00010000)? (poly << 8 ) : 0;
 232              		.loc 1 120 12 discriminator 4 view .LVU71
 233 003e 4340     		eors	r3, r3, r0
 234              	.LVL23:
 121:Application/Drivers/tmc/helpers/CRC.c **** 			CRCdata ^= (CRCdata & 0x01000000)? (poly << 16) : 0;
 235              		.loc 1 121 4 is_stmt 1 discriminator 4 view .LVU72
 121:Application/Drivers/tmc/helpers/CRC.c **** 			CRCdata ^= (CRCdata & 0x01000000)? (poly << 16) : 0;
 236              		.loc 1 121 52 is_stmt 0 discriminator 4 view .LVU73
 237 0040 10F48030 		ands	r0, r0, #65536
 238 0044 00D0     		beq	.L9
 121:Application/Drivers/tmc/helpers/CRC.c **** 			CRCdata ^= (CRCdata & 0x01000000)? (poly << 16) : 0;
 239              		.loc 1 121 52 discriminator 1 view .LVU74
 240 0046 2002     		lsls	r0, r4, #8
 241              	.L9:
 121:Application/Drivers/tmc/helpers/CRC.c **** 			CRCdata ^= (CRCdata & 0x01000000)? (poly << 16) : 0;
 242              		.loc 1 121 12 discriminator 4 view .LVU75
 243 0048 5840     		eors	r0, r0, r3
 244              	.LVL24:
 122:Application/Drivers/tmc/helpers/CRC.c **** 			CRCdata ^= (isMSBSet)?             (poly << 24) : 0;
 245              		.loc 1 122 4 is_stmt 1 discriminator 4 view .LVU76
 122:Application/Drivers/tmc/helpers/CRC.c **** 			CRCdata ^= (isMSBSet)?             (poly << 24) : 0;
 246              		.loc 1 122 52 is_stmt 0 discriminator 4 view .LVU77
 247 004a 13F08073 		ands	r3, r3, #16777216
 248 004e 00D0     		beq	.L10
 122:Application/Drivers/tmc/helpers/CRC.c **** 			CRCdata ^= (isMSBSet)?             (poly << 24) : 0;
 249              		.loc 1 122 52 discriminator 1 view .LVU78
 250 0050 2304     		lsls	r3, r4, #16
 251              	.L10:
 122:Application/Drivers/tmc/helpers/CRC.c **** 			CRCdata ^= (isMSBSet)?             (poly << 24) : 0;
 252              		.loc 1 122 12 discriminator 4 view .LVU79
 253 0052 4340     		eors	r3, r3, r0
 254              	.LVL25:
 123:Application/Drivers/tmc/helpers/CRC.c **** 		}
 255              		.loc 1 123 4 is_stmt 1 discriminator 4 view .LVU80
 123:Application/Drivers/tmc/helpers/CRC.c **** 		}
 256              		.loc 1 123 52 is_stmt 0 discriminator 4 view .LVU81
 257 0054 0029     		cmp	r1, #0
 258 0056 E7D0     		beq	.L17
 123:Application/Drivers/tmc/helpers/CRC.c **** 		}
 259              		.loc 1 123 52 discriminator 1 view .LVU82
 260 0058 2006     		lsls	r0, r4, #24
 261 005a E6E7     		b	.L11
 262              	.LVL26:
 263              	.L22:
ARM GAS  C:\Users\minhp\AppData\Local\Temp\cc9VAMQe.s 			page 10


 123:Application/Drivers/tmc/helpers/CRC.c **** 		}
 264              		.loc 1 123 52 discriminator 1 view .LVU83
 265              	.LBE4:
 127:Application/Drivers/tmc/helpers/CRC.c **** 		// Store the CRC result bytes in the table array
 266              		.loc 1 127 3 is_stmt 1 view .LVU84
 127:Application/Drivers/tmc/helpers/CRC.c **** 		// Store the CRC result bytes in the table array
 267              		.loc 1 127 53 is_stmt 0 view .LVU85
 268 005c 0FB1     		cbz	r7, .L13
 127:Application/Drivers/tmc/helpers/CRC.c **** 		// Store the CRC result bytes in the table array
 269              		.loc 1 127 28 discriminator 1 view .LVU86
 270 005e FFF7FEFF 		bl	flipBitsInBytes
 271              	.LVL27:
 272              	.L13:
 129:Application/Drivers/tmc/helpers/CRC.c **** 		CRCdata >>= 8;
 273              		.loc 1 129 3 is_stmt 1 discriminator 4 view .LVU87
 129:Application/Drivers/tmc/helpers/CRC.c **** 		CRCdata >>= 8;
 274              		.loc 1 129 12 is_stmt 0 discriminator 4 view .LVU88
 275 0062 2870     		strb	r0, [r5]
 130:Application/Drivers/tmc/helpers/CRC.c **** 		*table++ = (uint8_t) CRCdata;
 276              		.loc 1 130 3 is_stmt 1 discriminator 4 view .LVU89
 277              	.LVL28:
 131:Application/Drivers/tmc/helpers/CRC.c **** 		CRCdata >>= 8;
 278              		.loc 1 131 3 discriminator 4 view .LVU90
 131:Application/Drivers/tmc/helpers/CRC.c **** 		CRCdata >>= 8;
 279              		.loc 1 131 14 is_stmt 0 discriminator 4 view .LVU91
 280 0064 C0F30723 		ubfx	r3, r0, #8, #8
 131:Application/Drivers/tmc/helpers/CRC.c **** 		CRCdata >>= 8;
 281              		.loc 1 131 12 discriminator 4 view .LVU92
 282 0068 6B70     		strb	r3, [r5, #1]
 132:Application/Drivers/tmc/helpers/CRC.c **** 		*table++ = (uint8_t) CRCdata;
 283              		.loc 1 132 3 is_stmt 1 discriminator 4 view .LVU93
 284              	.LVL29:
 133:Application/Drivers/tmc/helpers/CRC.c **** 		CRCdata >>= 8;
 285              		.loc 1 133 3 discriminator 4 view .LVU94
 133:Application/Drivers/tmc/helpers/CRC.c **** 		CRCdata >>= 8;
 286              		.loc 1 133 14 is_stmt 0 discriminator 4 view .LVU95
 287 006a C0F30743 		ubfx	r3, r0, #16, #8
 133:Application/Drivers/tmc/helpers/CRC.c **** 		CRCdata >>= 8;
 288              		.loc 1 133 12 discriminator 4 view .LVU96
 289 006e AB70     		strb	r3, [r5, #2]
 134:Application/Drivers/tmc/helpers/CRC.c **** 		*table++ = (uint8_t) CRCdata;
 290              		.loc 1 134 3 is_stmt 1 discriminator 4 view .LVU97
 291              	.LVL30:
 135:Application/Drivers/tmc/helpers/CRC.c **** 	}
 292              		.loc 1 135 3 discriminator 4 view .LVU98
 135:Application/Drivers/tmc/helpers/CRC.c **** 	}
 293              		.loc 1 135 14 is_stmt 0 discriminator 4 view .LVU99
 294 0070 000E     		lsrs	r0, r0, #24
 295              	.LVL31:
 135:Application/Drivers/tmc/helpers/CRC.c **** 	}
 296              		.loc 1 135 12 discriminator 4 view .LVU100
 297 0072 E870     		strb	r0, [r5, #3]
 298              	.LBE2:
 104:Application/Drivers/tmc/helpers/CRC.c **** 	{
 299              		.loc 1 104 39 is_stmt 1 discriminator 4 view .LVU101
 104:Application/Drivers/tmc/helpers/CRC.c **** 	{
 300              		.loc 1 104 40 is_stmt 0 discriminator 4 view .LVU102
ARM GAS  C:\Users\minhp\AppData\Local\Temp\cc9VAMQe.s 			page 11


 301 0074 06F10436 		add	r6, r6, #67372036
 302              	.LVL32:
 303              	.LBB5:
 135:Application/Drivers/tmc/helpers/CRC.c **** 	}
 304              		.loc 1 135 9 discriminator 4 view .LVU103
 305 0078 0435     		adds	r5, r5, #4
 306              	.LVL33:
 307              	.L5:
 135:Application/Drivers/tmc/helpers/CRC.c **** 	}
 308              		.loc 1 135 9 discriminator 4 view .LVU104
 309              	.LBE5:
 104:Application/Drivers/tmc/helpers/CRC.c **** 	{
 310              		.loc 1 104 22 is_stmt 1 discriminator 2 view .LVU105
 104:Application/Drivers/tmc/helpers/CRC.c **** 	{
 311              		.loc 1 104 2 is_stmt 0 discriminator 2 view .LVU106
 312 007a 094B     		ldr	r3, .L24+8
 313 007c 9E42     		cmp	r6, r3
 314 007e 06D0     		beq	.L23
 315              	.LBB6:
 107:Application/Drivers/tmc/helpers/CRC.c **** 
 316              		.loc 1 107 3 is_stmt 1 view .LVU107
 107:Application/Drivers/tmc/helpers/CRC.c **** 
 317              		.loc 1 107 47 is_stmt 0 view .LVU108
 318 0080 002F     		cmp	r7, #0
 319 0082 CFD0     		beq	.L16
 107:Application/Drivers/tmc/helpers/CRC.c **** 
 320              		.loc 1 107 28 discriminator 1 view .LVU109
 321 0084 3046     		mov	r0, r6
 322 0086 FFF7FEFF 		bl	flipBitsInBytes
 323              	.LVL34:
 324              	.L6:
 110:Application/Drivers/tmc/helpers/CRC.c **** 		for(j = 0; j < 8; j++)
 325              		.loc 1 110 3 is_stmt 1 discriminator 4 view .LVU110
 111:Application/Drivers/tmc/helpers/CRC.c **** 		{
 326              		.loc 1 111 3 discriminator 4 view .LVU111
 111:Application/Drivers/tmc/helpers/CRC.c **** 		{
 327              		.loc 1 111 9 is_stmt 0 discriminator 4 view .LVU112
 328 008a 0022     		movs	r2, #0
 111:Application/Drivers/tmc/helpers/CRC.c **** 		{
 329              		.loc 1 111 3 discriminator 4 view .LVU113
 330 008c CFE7     		b	.L7
 331              	.LVL35:
 332              	.L23:
 111:Application/Drivers/tmc/helpers/CRC.c **** 		{
 333              		.loc 1 111 3 discriminator 4 view .LVU114
 334              	.LBE6:
 138:Application/Drivers/tmc/helpers/CRC.c **** }
 335              		.loc 1 138 9 view .LVU115
 336 008e 0120     		movs	r0, #1
 139:Application/Drivers/tmc/helpers/CRC.c **** 
 337              		.loc 1 139 1 view .LVU116
 338 0090 F8BD     		pop	{r3, r4, r5, r6, r7, pc}
 339              	.LVL36:
 340              	.L15:
 341              	.LCFI1:
 342              		.cfi_def_cfa_offset 0
 343              		.cfi_restore 3
ARM GAS  C:\Users\minhp\AppData\Local\Temp\cc9VAMQe.s 			page 12


 344              		.cfi_restore 4
 345              		.cfi_restore 5
 346              		.cfi_restore 6
 347              		.cfi_restore 7
 348              		.cfi_restore 14
  93:Application/Drivers/tmc/helpers/CRC.c **** 
 349              		.loc 1 93 10 view .LVU117
 350 0092 0020     		movs	r0, #0
 351              	.LVL37:
 139:Application/Drivers/tmc/helpers/CRC.c **** 
 352              		.loc 1 139 1 view .LVU118
 353 0094 7047     		bx	lr
 354              	.L25:
 355 0096 00BF     		.align	2
 356              	.L24:
 357 0098 00000000 		.word	.LANCHOR0
 358 009c 00010203 		.word	50462976
 359 00a0 00020304 		.word	67305984
 360              		.cfi_endproc
 361              	.LFE0:
 363              		.section	.text.tmc_CRC8,"ax",%progbits
 364              		.align	1
 365              		.global	tmc_CRC8
 366              		.syntax unified
 367              		.thumb
 368              		.thumb_func
 370              	tmc_CRC8:
 371              	.LVL38:
 372              	.LFB1:
 149:Application/Drivers/tmc/helpers/CRC.c **** 	uint8_t result = 0;
 373              		.loc 1 149 1 is_stmt 1 view -0
 374              		.cfi_startproc
 375              		@ args = 0, pretend = 0, frame = 0
 376              		@ frame_needed = 0, uses_anonymous_args = 0
 150:Application/Drivers/tmc/helpers/CRC.c **** 	uint8_t *table;
 377              		.loc 1 150 2 view .LVU120
 151:Application/Drivers/tmc/helpers/CRC.c **** 
 378              		.loc 1 151 2 view .LVU121
 153:Application/Drivers/tmc/helpers/CRC.c **** 		return 0;
 379              		.loc 1 153 2 view .LVU122
 153:Application/Drivers/tmc/helpers/CRC.c **** 		return 0;
 380              		.loc 1 153 4 is_stmt 0 view .LVU123
 381 0000 012A     		cmp	r2, #1
 382 0002 1ED8     		bhi	.L30
 149:Application/Drivers/tmc/helpers/CRC.c **** 	uint8_t result = 0;
 383              		.loc 1 149 1 view .LVU124
 384 0004 08B5     		push	{r3, lr}
 385              	.LCFI2:
 386              		.cfi_def_cfa_offset 8
 387              		.cfi_offset 3, -8
 388              		.cfi_offset 14, -4
 389 0006 0346     		mov	r3, r0
 156:Application/Drivers/tmc/helpers/CRC.c **** 
 390              		.loc 1 156 2 is_stmt 1 view .LVU125
 156:Application/Drivers/tmc/helpers/CRC.c **** 
 391              		.loc 1 156 8 is_stmt 0 view .LVU126
 392 0008 02EBC21E 		add	lr, r2, r2, lsl #7
ARM GAS  C:\Users\minhp\AppData\Local\Temp\cc9VAMQe.s 			page 13


 393 000c 0E48     		ldr	r0, .L35
 394              	.LVL39:
 156:Application/Drivers/tmc/helpers/CRC.c **** 
 395              		.loc 1 156 8 view .LVU127
 396 000e 00EB4E0E 		add	lr, r0, lr, lsl #1
 397              	.LVL40:
 158:Application/Drivers/tmc/helpers/CRC.c **** 		result = table[result ^ *data++];
 398              		.loc 1 158 2 is_stmt 1 view .LVU128
 150:Application/Drivers/tmc/helpers/CRC.c **** 	uint8_t *table;
 399              		.loc 1 150 10 is_stmt 0 view .LVU129
 400 0012 0020     		movs	r0, #0
 158:Application/Drivers/tmc/helpers/CRC.c **** 		result = table[result ^ *data++];
 401              		.loc 1 158 7 view .LVU130
 402 0014 06E0     		b	.L28
 403              	.LVL41:
 404              	.L29:
 159:Application/Drivers/tmc/helpers/CRC.c **** 
 405              		.loc 1 159 3 is_stmt 1 view .LVU131
 159:Application/Drivers/tmc/helpers/CRC.c **** 
 406              		.loc 1 159 27 is_stmt 0 view .LVU132
 407 0016 13F8011B 		ldrb	r1, [r3], #1	@ zero_extendqisi2
 408              	.LVL42:
 159:Application/Drivers/tmc/helpers/CRC.c **** 
 409              		.loc 1 159 25 view .LVU133
 410 001a 4140     		eors	r1, r1, r0
 411 001c C9B2     		uxtb	r1, r1
 159:Application/Drivers/tmc/helpers/CRC.c **** 
 412              		.loc 1 159 10 view .LVU134
 413 001e 1EF80100 		ldrb	r0, [lr, r1]	@ zero_extendqisi2
 414              	.LVL43:
 158:Application/Drivers/tmc/helpers/CRC.c **** 		result = table[result ^ *data++];
 415              		.loc 1 158 13 view .LVU135
 416 0022 6146     		mov	r1, ip
 417              	.LVL44:
 418              	.L28:
 158:Application/Drivers/tmc/helpers/CRC.c **** 		result = table[result ^ *data++];
 419              		.loc 1 158 7 is_stmt 1 view .LVU136
 158:Application/Drivers/tmc/helpers/CRC.c **** 		result = table[result ^ *data++];
 420              		.loc 1 158 13 is_stmt 0 view .LVU137
 421 0024 01F1FF3C 		add	ip, r1, #-1
 422              	.LVL45:
 158:Application/Drivers/tmc/helpers/CRC.c **** 		result = table[result ^ *data++];
 423              		.loc 1 158 7 view .LVU138
 424 0028 0029     		cmp	r1, #0
 425 002a F4D1     		bne	.L29
 161:Application/Drivers/tmc/helpers/CRC.c **** }
 426              		.loc 1 161 2 is_stmt 1 view .LVU139
 161:Application/Drivers/tmc/helpers/CRC.c **** }
 427              		.loc 1 161 26 is_stmt 0 view .LVU140
 428 002c 02EBC212 		add	r2, r2, r2, lsl #7
 429              	.LVL46:
 161:Application/Drivers/tmc/helpers/CRC.c **** }
 430              		.loc 1 161 26 view .LVU141
 431 0030 054B     		ldr	r3, .L35
 432              	.LVL47:
 161:Application/Drivers/tmc/helpers/CRC.c **** }
 433              		.loc 1 161 26 view .LVU142
ARM GAS  C:\Users\minhp\AppData\Local\Temp\cc9VAMQe.s 			page 14


 434 0032 03EB4202 		add	r2, r3, r2, lsl #1
 435 0036 92F80131 		ldrb	r3, [r2, #257]	@ zero_extendqisi2
 161:Application/Drivers/tmc/helpers/CRC.c **** }
 436              		.loc 1 161 58 view .LVU143
 437 003a 0BB1     		cbz	r3, .L27
 161:Application/Drivers/tmc/helpers/CRC.c **** }
 438              		.loc 1 161 41 discriminator 1 view .LVU144
 439 003c FFF7FEFF 		bl	flipByte
 440              	.LVL48:
 441              	.L27:
 162:Application/Drivers/tmc/helpers/CRC.c **** 
 442              		.loc 1 162 1 view .LVU145
 443 0040 08BD     		pop	{r3, pc}
 444              	.LVL49:
 445              	.L30:
 446              	.LCFI3:
 447              		.cfi_def_cfa_offset 0
 448              		.cfi_restore 3
 449              		.cfi_restore 14
 154:Application/Drivers/tmc/helpers/CRC.c **** 
 450              		.loc 1 154 10 view .LVU146
 451 0042 0020     		movs	r0, #0
 452              	.LVL50:
 162:Application/Drivers/tmc/helpers/CRC.c **** 
 453              		.loc 1 162 1 view .LVU147
 454 0044 7047     		bx	lr
 455              	.L36:
 456 0046 00BF     		.align	2
 457              	.L35:
 458 0048 00000000 		.word	.LANCHOR0
 459              		.cfi_endproc
 460              	.LFE1:
 462              		.section	.text.tmc_tableGetPolynomial,"ax",%progbits
 463              		.align	1
 464              		.global	tmc_tableGetPolynomial
 465              		.syntax unified
 466              		.thumb
 467              		.thumb_func
 469              	tmc_tableGetPolynomial:
 470              	.LVL51:
 471              	.LFB2:
 165:Application/Drivers/tmc/helpers/CRC.c **** 	if(index >= CRC_TABLE_COUNT)
 472              		.loc 1 165 1 is_stmt 1 view -0
 473              		.cfi_startproc
 474              		@ args = 0, pretend = 0, frame = 0
 475              		@ frame_needed = 0, uses_anonymous_args = 0
 476              		@ link register save eliminated.
 166:Application/Drivers/tmc/helpers/CRC.c **** 		return 0;
 477              		.loc 1 166 2 view .LVU149
 166:Application/Drivers/tmc/helpers/CRC.c **** 		return 0;
 478              		.loc 1 166 4 is_stmt 0 view .LVU150
 479 0000 0128     		cmp	r0, #1
 480 0002 07D8     		bhi	.L39
 169:Application/Drivers/tmc/helpers/CRC.c **** }
 481              		.loc 1 169 2 is_stmt 1 view .LVU151
 169:Application/Drivers/tmc/helpers/CRC.c **** }
 482              		.loc 1 169 25 is_stmt 0 view .LVU152
ARM GAS  C:\Users\minhp\AppData\Local\Temp\cc9VAMQe.s 			page 15


 483 0004 00EBC010 		add	r0, r0, r0, lsl #7
 484              	.LVL52:
 169:Application/Drivers/tmc/helpers/CRC.c **** }
 485              		.loc 1 169 25 view .LVU153
 486 0008 034B     		ldr	r3, .L40
 487 000a 03EB4000 		add	r0, r3, r0, lsl #1
 488 000e 90F80001 		ldrb	r0, [r0, #256]	@ zero_extendqisi2
 489 0012 7047     		bx	lr
 490              	.LVL53:
 491              	.L39:
 167:Application/Drivers/tmc/helpers/CRC.c **** 
 492              		.loc 1 167 10 view .LVU154
 493 0014 0020     		movs	r0, #0
 494              	.LVL54:
 170:Application/Drivers/tmc/helpers/CRC.c **** 
 495              		.loc 1 170 1 view .LVU155
 496 0016 7047     		bx	lr
 497              	.L41:
 498              		.align	2
 499              	.L40:
 500 0018 00000000 		.word	.LANCHOR0
 501              		.cfi_endproc
 502              	.LFE2:
 504              		.section	.text.tmc_tableIsReflected,"ax",%progbits
 505              		.align	1
 506              		.global	tmc_tableIsReflected
 507              		.syntax unified
 508              		.thumb
 509              		.thumb_func
 511              	tmc_tableIsReflected:
 512              	.LVL55:
 513              	.LFB3:
 173:Application/Drivers/tmc/helpers/CRC.c **** 	if(index >= CRC_TABLE_COUNT)
 514              		.loc 1 173 1 is_stmt 1 view -0
 515              		.cfi_startproc
 516              		@ args = 0, pretend = 0, frame = 0
 517              		@ frame_needed = 0, uses_anonymous_args = 0
 518              		@ link register save eliminated.
 174:Application/Drivers/tmc/helpers/CRC.c **** 		return false;
 519              		.loc 1 174 2 view .LVU157
 174:Application/Drivers/tmc/helpers/CRC.c **** 		return false;
 520              		.loc 1 174 4 is_stmt 0 view .LVU158
 521 0000 0128     		cmp	r0, #1
 522 0002 07D8     		bhi	.L44
 177:Application/Drivers/tmc/helpers/CRC.c **** }
 523              		.loc 1 177 2 is_stmt 1 view .LVU159
 177:Application/Drivers/tmc/helpers/CRC.c **** }
 524              		.loc 1 177 25 is_stmt 0 view .LVU160
 525 0004 00EBC010 		add	r0, r0, r0, lsl #7
 526              	.LVL56:
 177:Application/Drivers/tmc/helpers/CRC.c **** }
 527              		.loc 1 177 25 view .LVU161
 528 0008 034B     		ldr	r3, .L45
 529 000a 03EB4000 		add	r0, r3, r0, lsl #1
 530 000e 90F80101 		ldrb	r0, [r0, #257]	@ zero_extendqisi2
 531 0012 7047     		bx	lr
 532              	.LVL57:
ARM GAS  C:\Users\minhp\AppData\Local\Temp\cc9VAMQe.s 			page 16


 533              	.L44:
 175:Application/Drivers/tmc/helpers/CRC.c **** 
 534              		.loc 1 175 10 view .LVU162
 535 0014 0020     		movs	r0, #0
 536              	.LVL58:
 178:Application/Drivers/tmc/helpers/CRC.c **** 
 537              		.loc 1 178 1 view .LVU163
 538 0016 7047     		bx	lr
 539              	.L46:
 540              		.align	2
 541              	.L45:
 542 0018 00000000 		.word	.LANCHOR0
 543              		.cfi_endproc
 544              	.LFE3:
 546              		.global	CRCTables
 547              		.section	.bss.CRCTables,"aw",%nobits
 548              		.align	2
 549              		.set	.LANCHOR0,. + 0
 552              	CRCTables:
 553 0000 00000000 		.space	516
 553      00000000 
 553      00000000 
 553      00000000 
 553      00000000 
 554              		.text
 555              	.Letext0:
 556              		.file 2 "c:\\program files (x86)\\gnu arm embedded toolchain\\10 2021.10\\arm-none-eabi\\include\\
 557              		.file 3 "c:\\program files (x86)\\gnu arm embedded toolchain\\10 2021.10\\arm-none-eabi\\include\\
ARM GAS  C:\Users\minhp\AppData\Local\Temp\cc9VAMQe.s 			page 17


DEFINED SYMBOLS
                            *ABS*:00000000 CRC.c
C:\Users\minhp\AppData\Local\Temp\cc9VAMQe.s:20     .text.flipByte:00000000 $t
C:\Users\minhp\AppData\Local\Temp\cc9VAMQe.s:25     .text.flipByte:00000000 flipByte
C:\Users\minhp\AppData\Local\Temp\cc9VAMQe.s:78     .text.flipBitsInBytes:00000000 $t
C:\Users\minhp\AppData\Local\Temp\cc9VAMQe.s:83     .text.flipBitsInBytes:00000000 flipBitsInBytes
C:\Users\minhp\AppData\Local\Temp\cc9VAMQe.s:138    .text.tmc_fillCRC8Table:00000000 $t
C:\Users\minhp\AppData\Local\Temp\cc9VAMQe.s:144    .text.tmc_fillCRC8Table:00000000 tmc_fillCRC8Table
C:\Users\minhp\AppData\Local\Temp\cc9VAMQe.s:357    .text.tmc_fillCRC8Table:00000098 $d
C:\Users\minhp\AppData\Local\Temp\cc9VAMQe.s:364    .text.tmc_CRC8:00000000 $t
C:\Users\minhp\AppData\Local\Temp\cc9VAMQe.s:370    .text.tmc_CRC8:00000000 tmc_CRC8
C:\Users\minhp\AppData\Local\Temp\cc9VAMQe.s:458    .text.tmc_CRC8:00000048 $d
C:\Users\minhp\AppData\Local\Temp\cc9VAMQe.s:463    .text.tmc_tableGetPolynomial:00000000 $t
C:\Users\minhp\AppData\Local\Temp\cc9VAMQe.s:469    .text.tmc_tableGetPolynomial:00000000 tmc_tableGetPolynomial
C:\Users\minhp\AppData\Local\Temp\cc9VAMQe.s:500    .text.tmc_tableGetPolynomial:00000018 $d
C:\Users\minhp\AppData\Local\Temp\cc9VAMQe.s:505    .text.tmc_tableIsReflected:00000000 $t
C:\Users\minhp\AppData\Local\Temp\cc9VAMQe.s:511    .text.tmc_tableIsReflected:00000000 tmc_tableIsReflected
C:\Users\minhp\AppData\Local\Temp\cc9VAMQe.s:542    .text.tmc_tableIsReflected:00000018 $d
C:\Users\minhp\AppData\Local\Temp\cc9VAMQe.s:552    .bss.CRCTables:00000000 CRCTables
C:\Users\minhp\AppData\Local\Temp\cc9VAMQe.s:548    .bss.CRCTables:00000000 $d

NO UNDEFINED SYMBOLS
